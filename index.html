// fetchData.js
document.addEventListener("DOMContentLoaded", function () {
  const url = "fetchData.php";  // Point to the PHP script you created

  // Fetch data from the PHP file
  fetch(url)
    .then(response => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then(data => {
      // Populate the table with data
      const tableBody = document.getElementById('tableBody');
      tableBody.innerHTML = ''; // Clear existing table rows

      data.forEach(row => {
        const tr = document.createElement('tr');

        // Create table cells for each row
        tr.innerHTML = `
          <td>${row.province}</td>
          <td>${row.assessment_center}</td>
          <td>${row.center_manager}</td>
          <td>${row.sector}</td>
          <td>${row.qualification_title}</td>
          <td>${row.accreditation_number}</td>
          <td>${row.date_accredited}</td>
          <td style="color: ${row.status_color};">${row.valid_until} (${row.status_text})</td>
        `;

        tableBody.appendChild(tr);
      });
    })
    .catch(error => {
      console.error('There was an error with the fetch operation:', error);
    });
});
